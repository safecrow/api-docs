## Платежная информация

Платежные реквизиты пользователя (продавца или покупателя), на которые будут перечислены деньги по завершении сделки. Может быть расчетным счетом или кредитной картой.

### HTTP REQUESTS

`GET /orders/:id/credit_card` - Кредитная карта создание.

`POST /orders/:id/billing_info` - Расчетный счет создание.

### Просмотр платежной информации

Поле billing_info в [Информации о сделки](#part-dec3052b853e0b29). Показывает платежные реквизиты(расчетный счет или кредитная карта) текущего пользователя, для текущей сделки.

### Кредитная карта

> GET /orders/1833/credit_card

> Response

```http
HTTP/1.1 201 Created
```
```json
{
  "id" : 5,
  "redirect_url" : "https://secure.mandarinpay.com/Pay/Select?transaction=080225790640482092ba95ab2671432c"
}
```

<aside class="warning">
Привязка карт к сделкам стоимость которых больше или равна 75000р невозможна и будет возвращена соответствующая ошибка.
</aside>

<aside class="notice">
Создает запрос на привязку кредитной карты продавца или покупателя, в зависимости от роли текущего пользователя в сделке. Кредитная карта считается не валидной до того как мандарин не подтвердит успешную привязку карты. Все поля(кроме id) кредитной карты проставляются автоматически после подтверждения привязки от мандарина.
</aside>

### Возвращает

Ключ | Значение/Формат значения
--------- | -----------
id |	ИД платежных реквизитов (число)
redirect_url |	Ссылка, куда будет отправлен пользователь для привязки карты через мандарин

### Расчетный счет

Проставятся реквизиты продавца или покупателя, в зависимости от роли текущего пользователя в сделке


> POST /orders/1833/billing_info

```json
{
  "billing_info" : {
    "holder_type" : "business",
    "billing_type" : "bank_account",
    "payment_params" : {
      "bik" : "041111111",
      "account" : "11111222223333344444",
      "organization" : "Mememem",
      "inn" : "0238526872",
      "ogrn" : "5077746887312"
    }
  }
}
```

> Response

```http
HTTP/1.1 201 Created
```
```json
{
  "billing_info" : {
    "id" : 5,
    "billing_type" : "bank_account",
    "holder_type" : "business",
    "payment_params" : {
      "organization" : "Mememem",
      "inn" : "0238526872",
      "ogrn" : "5077746887312",
      "bik" : "041111111",
      "account" : "11111222223333344444"
    },
    "title" : "Mememem  11111222223333344444"
  }
}
```

### Параметры в запросе

Ключ | Обязательно | Описание
--------- | ------- | -----------
billing_info |	да |	JSON объект с данными оплаты
billing_info.holder_type |	да	| Тип плательщика. Может быть: <br/>business – юридическое лицо <br/>personal – физическое лицо
billing_info.billing_type |	да	| Тип оплаты. Может быть: <br/>bank_account – расчетный счет <br/>card - банковская карта (доступно только если плательщик - физ. лицо)
billing_info.payment_params |	да |	JSON объект с платежными реквизитами
billing_info.payment_params.name |	да, если: <br/>плательщик - физ. лицо <br/>способ оплаты - расчетный счет | Текст, мин. 2 слова, по 2 символа
billing_info.payment_params.organization	| да, если: <br/>плательщик - юр. лицо <br/>способ оплаты - расчетный счет | Текст
billing_info.payment_params.bik |	да |	Код банка, на территории РФ (04 + 7 цифр)
billing_info.payment_params.account |	да |	Номер расчетного счета (20-25 цифр)
billing_info.payment_params.ogrn	| да, если: <br/>плательщик - юр. лицо <br/>способ оплаты - расчетный счет | ОГРН (13 цифр)
billing_info.payment_params.inn	| да, если: <br/>плательщик - юр. лицо <br/>способ оплаты - расчетный счет | ИНН (10-12 цифр)

### Возвращает

Ключ | Когда возвращается |  Значение/Формат значения
--------- | ----------- | ------------
billing_info |	всегда |	JSON объект
billing_info.id |	всегда |	ИД платежных реквизитов (число)
billing_info.holder_type |	всегда |	Тип плательщика
billing_info.title | всегда |	Сгенерированный шорткат
billing_info.payment_params |	всегда |	JSON объект - платежные реквизиты 
billing_info.payment_params.organization | плательщик - юр. лицо <br/>способ оплаты - расчетный счет | Название организации
billing_info.payment_params.ogrn | плательщик - юр. лицо <br/>способ оплаты - расчетный счет | ОГРН
billing_info.payment_params.inn	 | плательщик - юр. лицо <br/>способ оплаты - расчетный счет | ИНН
billing_info.payment_params.account |	всегда | Номер расчетного счета
billing_info.payment_params.bik |	всегда | БИК

